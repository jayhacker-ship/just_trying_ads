<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0f1033">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Watch Ads Earn Money</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
    <!-- Add Font Awesome for animated icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <link rel="icon" href="icons/favicon.ico" type="image/x-icon">
    <meta name="description" content="Watch ads and earn real money through this platform">
    <!-- Modern fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
</head>
<body>
    <!-- Particles background for visual effect -->
    <div id="particles-js"></div>
    
    <!-- Animated background gradients -->
    <div class="animated-gradient"></div>
    
    <!-- Auth Overlay -->
    <div class="auth-overlay" id="authOverlay">
        <div class="auth-container">
            <div class="auth-card">
                <div class="auth-logo">
                    <i class="fas fa-money-bill-wave logo-icon pulse-animation"></i>
                    <h2 class="app-title">Watch Ads Earn Money</h2>
                    <p class="app-description">Turn your free time into rewards by watching ads and referring friends!</p>
                </div>
                
                <div class="auth-benefits">
                    <div class="benefit-item">
                        <i class="fas fa-gift"></i>
                        <span>Earn daily rewards</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-users"></i>
                        <span>Invite friends & earn more</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-money-bill-alt"></i>
                        <span>Cash out anytime</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-chart-line"></i>
                        <span>Track your earnings</span>
                    </div>
                </div>
                
                <div class="auth-tabs-container">
                    <div class="auth-tabs">
                        <button class="tab-btn active" id="loginTabBtn">Login</button>
                        <button class="tab-btn" id="signupTabBtn">Sign Up</button>
                        <div class="tab-indicator"></div>
                    </div>
                </div>
                
                <div class="tab-content-container">
                    <div id="loginTabContent" class="tab-content active">
                        <form id="loginForm" novalidate>
                            <div class="input-field">
                                <label for="loginUsername">Username/Email/Mobile</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-user input-icon"></i>
                                    <input type="text" id="loginUsername" placeholder="Enter your username, email or mobile">
                                </div>
                                <div class="error-message" id="loginUsernameError"></div>
                            </div>
                            <div class="input-field">
                                <label for="loginPassword">Password</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-lock input-icon"></i>
                                    <input type="password" id="loginPassword" placeholder="Enter your password">
                                    <button type="button" class="toggle-password" tabindex="-1">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="error-message" id="loginPasswordError"></div>
                            </div>
                            <div class="remember-forgot">
                                <label class="remember-me">
                                    <input type="checkbox" id="rememberMe">
                                    <span>Remember me</span>
                                </label>
                                <a href="#" class="forgot-link">Forgot Password?</a>
                            </div>
                            <button type="submit" class="login-btn" id="loginButton">
                                <i class="fas fa-sign-in-alt"></i> 
                                <span>Login</span>
                                <div class="button-loader"></div>
                            </button>
                            
                            <div class="login-options">
                                <div class="separator">
                                    <span>or login with</span>
                                </div>
                                <div class="social-login">
                                    <button type="button" class="social-btn google">
                                        <i class="fab fa-google"></i>
                                    </button>
                                    <button type="button" class="social-btn facebook">
                                        <i class="fab fa-facebook-f"></i>
                                    </button>
                                    <button type="button" class="social-btn apple">
                                        <i class="fab fa-apple"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="signup-redirect">
                                <p>Don't have an account? <button type="button" id="goToSignup" class="text-btn">Sign up now</button></p>
                            </div>
                        </form>
                    </div>
                    
                    <div id="signupTabContent" class="tab-content">
                        <form id="signupForm" novalidate>
                            <div class="input-field">
                                <label for="signupName">Full Name</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-user input-icon"></i>
                                    <input type="text" id="signupName" placeholder="Enter your full name" required>
                                </div>
                                <div class="error-message" id="signupNameError"></div>
                            </div>
                            <div class="input-field">
                                <label for="signupMobile">Mobile Number</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-mobile-alt input-icon"></i>
                                    <input type="text" id="signupMobile" placeholder="Enter your mobile number" required>
                                </div>
                                <div class="error-message" id="signupMobileError"></div>
                            </div>
                            <div class="input-field">
                                <label for="signupEmail">Email Address</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-envelope input-icon"></i>
                                    <input type="email" id="signupEmail" placeholder="Enter your email address" required>
                                </div>
                                <div class="error-message" id="signupEmailError"></div>
                            </div>
                            <div class="input-field">
                                <label for="signupPassword">Password</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-lock input-icon"></i>
                                    <input type="password" id="signupPassword" placeholder="Create a password (min 6 characters)" required>
                                    <button type="button" class="toggle-password" tabindex="-1">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="error-message" id="signupPasswordError"></div>
                                <div class="password-strength" id="passwordStrength">
                                    <div class="strength-bar">
                                        <div class="strength-progress"></div>
                                    </div>
                                    <div class="strength-text">Password strength</div>
                                </div>
                            </div>
                            <div class="input-field">
                                <label for="signupConfirmPassword">Confirm Password</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-lock input-icon"></i>
                                    <input type="password" id="signupConfirmPassword" placeholder="Confirm your password" required>
                                    <button type="button" class="toggle-password" tabindex="-1">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="error-message" id="signupConfirmPasswordError"></div>
                            </div>
                            <div class="terms-check">
                                <label class="custom-checkbox">
                                    <input type="checkbox" id="termsAgreed" required>
                                    <span class="checkmark"></span>
                                    <span class="checkbox-text">I agree to the <a href="#" class="terms-link">Terms & Conditions</a></span>
                                </label>
                                <div class="error-message" id="termsError"></div>
                            </div>
                            <button type="submit" class="signup-btn" id="signupButton">
                                <i class="fas fa-user-plus"></i> 
                                <span>Create Account</span>
                                <div class="button-loader"></div>
                            </button>
                            
                            <div class="login-redirect">
                                <p>Already have an account? <button type="button" id="goToLogin" class="text-btn">Login now</button></p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="header">
            <div class="logo-container">
                <i class="fa-solid fa-coins logo-icon"></i>
                <h1 class="gradient-text">Watch Ads Earn Money</h1>
            </div>
        </div>
        
        <div class="content" id="content">
            <!-- Content will be dynamically loaded here -->
            <div class="loading-spinner">
                <lottie-player src="https://assets7.lottiefiles.com/packages/lf20_usmfx6bp.json" background="transparent" speed="1" style="width: 150px; height: 150px;" loop autoplay></lottie-player>
                <p>Loading amazing features...</p>
            </div>
        </div>
        
        <!-- Banner Ad Container -->
        <div class="banner-ad-container" id="bannerAdContainer">
            <div class="ad-label">Advertisement</div>
            <div class="banner-ad" id="bannerAd">
                <div class="simulated-ad">
                    <div class="ad-content">
                        <img src="https://via.placeholder.com/320x50/0f1033/ffffff?text=Banner+Ad" alt="Banner Ad" class="ad-image">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Modern bottom navigation -->
        <div class="footer">
            <button class="nav-btn active" onclick="loadHome()">
                <i class="fa-solid fa-home"></i>
                <span>Home</span>
            </button>
            <button class="nav-btn" onclick="loadProfile()">
                <i class="fa-solid fa-user"></i>
                <span>Profile</span>
            </button>
            <button class="nav-btn" onclick="loadWithdrawal()">
                <i class="fa-solid fa-wallet"></i>
                <span>Withdraw</span>
            </button>
            <button class="nav-btn" onclick="loadReferral()">
                <i class="fa-solid fa-share-nodes"></i>
                <span>Referral</span>
            </button>
        </div>
    </div>

    <!-- User Menu Overlay -->
    <div id="userMenuOverlay" class="user-menu-overlay">
        <button id="logoutBtn" class="menu-btn logout-btn">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
        </button>
    </div>
    
    <!-- Ad Overlay -->
    <div id="adOverlay" class="ad-overlay">
        <div class="ad-container">
            <div class="ad-header">
                <h3>Advertisement</h3>
            </div>
            <div class="ad-content">
                <div class="ad-animation">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="ad-progress-container">
                    <div class="ad-progress-bar"></div>
                </div>
                <p class="ad-message">Please wait while the ad is playing...</p>
                <p class="ad-reward-message"></p>
                <button id="closeAdBtn" class="btn primary-btn">Close</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="script.js" defer></script>
    <script>
        // Initialize Particle.js with optimized settings for mobile
        particlesJS("particles-js", {
            particles: {
                number: { 
                    value: window.innerWidth < 768 ? 20 : 40, 
                    density: { enable: true, value_area: 800 } 
                },
                color: { value: "#ffffff" },
                shape: { type: "circle" },
                opacity: { value: 0.3, random: true },
                size: { value: 2, random: true },
                line_linked: { 
                    enable: true, 
                    distance: window.innerWidth < 768 ? 100 : 150, 
                    color: "#ffffff", 
                    opacity: 0.2, 
                    width: 1 
                },
                move: { 
                    enable: true, 
                    speed: window.innerWidth < 768 ? 0.8 : 1, 
                    direction: "none", 
                    random: true, 
                    out_mode: "out" 
                }
            },
            retina_detect: true
        });
        
        // Simple direct tab switching
        document.addEventListener('DOMContentLoaded', function() {
            const loginTab = document.getElementById('loginTabBtn');
            const signupTab = document.getElementById('signupTabBtn');
            const loginContent = document.getElementById('loginTabContent');
            const signupContent = document.getElementById('signupTabContent');
            
            loginTab.addEventListener('click', function() {
                loginTab.classList.add('active');
                signupTab.classList.remove('active');
                loginContent.classList.add('active');
                signupContent.classList.remove('active');
            });
            
            signupTab.addEventListener('click', function() {
                signupTab.classList.add('active');
                loginTab.classList.remove('active');
                signupContent.classList.add('active');
                loginContent.classList.remove('active');
            });
            
            // Set up form submission
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                console.log('Login form submitted from HTML event listener');
                try {
                    if (typeof handleLogin === 'function') {
                        handleLogin(e);
                    } else {
                        console.error('handleLogin function not found');
                        alert('Login functionality is not available. Please refresh the page and try again.');
                    }
                } catch (error) {
                    console.error('Error during login submission:', error);
                    alert('An error occurred during login. Please try again.');
                }
            });
            
            document.getElementById('signupForm').addEventListener('submit', function(e) {
                e.preventDefault();
                console.log('Signup form submitted from HTML event listener');
                try {
                    if (typeof handleSignup === 'function') {
                        const isSuccess = handleSignup(e);
                        if (isSuccess) {
                            console.log('Signup was successful');
                        } else {
                            console.log('Signup failed or was cancelled');
                        }
                    } else {
                        console.error('handleSignup function not found');
                        alert('Signup functionality is not available. Please refresh the page and try again.');
                    }
                } catch (error) {
                    console.error('Error during signup submission:', error);
                    alert('An error occurred during signup. Please try again.');
                }
            });
            
            // Add event listener for signup redirect button
            document.getElementById('goToSignup').addEventListener('click', function() {
                signupTab.classList.add('active');
                loginTab.classList.remove('active');
                signupContent.classList.add('active');
                loginContent.classList.remove('active');
            });
            
            // Initialize the app
            if (typeof init === 'function') {
                init();
            }
            
            // Add password toggle functionality
            const toggleButtons = document.querySelectorAll('.toggle-password');
            toggleButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const input = this.previousElementSibling;
                    const icon = this.querySelector('i');
                    
                    if (input.type === 'password') {
                        input.type = 'text';
                        icon.classList.remove('fa-eye');
                        icon.classList.add('fa-eye-slash');
                    } else {
                        input.type = 'password';
                        icon.classList.remove('fa-eye-slash');
                        icon.classList.add('fa-eye');
                    }
                });
            });
            
            // Password strength meter
            const passwordInput = document.getElementById('signupPassword');
            const strengthMeter = document.getElementById('passwordStrength');
            const strengthProgress = document.querySelector('.strength-progress');
            const strengthText = document.querySelector('.strength-text');
            
            if (passwordInput && strengthMeter) {
                passwordInput.addEventListener('input', function() {
                    const password = this.value;
                    if (password.length > 0) {
                        strengthMeter.classList.add('show');
                        
                        // Calculate strength
                        let strength = 0;
                        
                        // Length check
                        if (password.length >= 8) strength += 1;
                        
                        // Complexity checks
                        if (/[A-Z]/.test(password)) strength += 1;
                        if (/[0-9]/.test(password)) strength += 1;
                        if (/[^A-Za-z0-9]/.test(password)) strength += 1;
                        
                        // Update strength indicator
                        strengthProgress.className = 'strength-progress';
                        
                        if (strength <= 1) {
                            strengthProgress.classList.add('weak');
                            strengthText.textContent = 'Weak password';
                        } else if (strength <= 3) {
                            strengthProgress.classList.add('medium');
                            strengthText.textContent = 'Medium password';
                        } else {
                            strengthProgress.classList.add('strong');
                            strengthText.textContent = 'Strong password';
                        }
                    } else {
                        strengthMeter.classList.remove('show');
                    }
                });
            }
            
            // Error message display function
            function showError(inputId, message) {
                const errorElement = document.getElementById(inputId + 'Error');
                if (errorElement) {
                    errorElement.textContent = message;
                    errorElement.classList.add('show');
                }
            }
            
            function clearError(inputId) {
                const errorElement = document.getElementById(inputId + 'Error');
                if (errorElement) {
                    errorElement.textContent = '';
                    errorElement.classList.remove('show');
                }
            }
            
            // Form validation
            const signupForm = document.getElementById('signupForm');
            if (signupForm) {
                const nameInput = document.getElementById('signupName');
                const mobileInput = document.getElementById('signupMobile');
                const emailInput = document.getElementById('signupEmail');
                const passwordInput = document.getElementById('signupPassword');
                const confirmPasswordInput = document.getElementById('signupConfirmPassword');
                const termsCheckbox = document.getElementById('termsAgreed');
                const submitButton = document.getElementById('signupButton');
                
                // Input validation on blur
                if (nameInput) {
                    nameInput.addEventListener('blur', function() {
                        if (!this.value.trim()) {
                            showError('signupName', 'Please enter your name');
                        } else {
                            clearError('signupName');
                        }
                    });
                }
                
                if (mobileInput) {
                    mobileInput.addEventListener('blur', function() {
                        if (!this.value.trim()) {
                            showError('signupMobile', 'Please enter your mobile number');
                        } else if (!/^\d{10,}$/.test(this.value.trim())) {
                            showError('signupMobile', 'Please enter a valid mobile number');
                        } else {
                            clearError('signupMobile');
                        }
                    });
                }
                
                if (emailInput) {
                    emailInput.addEventListener('blur', function() {
                        if (!this.value.trim()) {
                            showError('signupEmail', 'Please enter your email address');
                        } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.value.trim())) {
                            showError('signupEmail', 'Please enter a valid email address');
                        } else {
                            clearError('signupEmail');
                        }
                    });
                }
                
                if (passwordInput) {
                    passwordInput.addEventListener('blur', function() {
                        if (!this.value) {
                            showError('signupPassword', 'Please enter a password');
                        } else if (this.value.length < 6) {
                            showError('signupPassword', 'Password must be at least 6 characters');
                        } else {
                            clearError('signupPassword');
                        }
                    });
                }
                
                if (confirmPasswordInput && passwordInput) {
                    confirmPasswordInput.addEventListener('blur', function() {
                        if (!this.value) {
                            showError('signupConfirmPassword', 'Please confirm your password');
                        } else if (this.value !== passwordInput.value) {
                            showError('signupConfirmPassword', 'Passwords do not match');
                        } else {
                            clearError('signupConfirmPassword');
                        }
                    });
                }
                
                // Update UI when form is submitting
                signupForm.addEventListener('submit', function(e) {
                    const submitButton = this.querySelector('button[type="submit"]');
                    if (submitButton) {
                        submitButton.classList.add('loading');
                    }
                });
            }
            
            // Login form validation
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                const usernameInput = document.getElementById('loginUsername');
                const passwordInput = document.getElementById('loginPassword');
                const submitButton = document.getElementById('loginButton');
                
                if (usernameInput) {
                    usernameInput.addEventListener('blur', function() {
                        if (!this.value.trim()) {
                            showError('loginUsername', 'Please enter your username or email');
                        } else {
                            clearError('loginUsername');
                        }
                    });
                }
                
                if (passwordInput) {
                    passwordInput.addEventListener('blur', function() {
                        if (!this.value) {
                            showError('loginPassword', 'Please enter your password');
                        } else {
                            clearError('loginPassword');
                        }
                    });
                }
                
                // Update UI when form is submitting
                loginForm.addEventListener('submit', function(e) {
                    const submitButton = this.querySelector('button[type="submit"]');
                    if (submitButton) {
                        submitButton.classList.add('loading');
                    }
                });
            }
            
            // Additional redirection button
            const goToLoginBtn = document.getElementById('goToLogin');
            if (goToLoginBtn) {
                goToLoginBtn.addEventListener('click', function() {
                    document.getElementById('loginTabBtn').click();
                });
            }
        });
    </script>
</body>
</html>
